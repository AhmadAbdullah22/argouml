<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FigStereotypesGroup.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">argouml-app</a> &gt; <a href="index.source.html" class="el_package">org.argouml.uml.diagram.ui</a> &gt; <span class="el_source">FigStereotypesGroup.java</span></div><h1>FigStereotypesGroup.java</h1><pre class="source lang-java linenums">/* $Id$
 *******************************************************************************
 * Copyright (c) 2009-2012 Contributors - see below
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Bob Tarling
 *******************************************************************************
 *
 * Some portions of this file was previously release using the BSD License:
 */
// $Id$
// Copyright (c) 1996-2009 The Regents of the University of California. All
// Rights Reserved. Permission to use, copy, modify, and distribute this
// software and its documentation without fee, and without a written
// agreement is hereby granted, provided that the above copyright notice
// and this paragraph appear in all copies.  This software program and
// documentation are copyrighted by The Regents of the University of
// California. The software program and documentation are supplied &quot;AS
// IS&quot;, without any accompanying services from The Regents. The Regents
// does not warrant that the operation of the program will be
// uninterrupted or error-free. The end-user understands that the program
// was developed for research purposes and is advised not to rely
// exclusively on the program for any reason.  IN NO EVENT SHALL THE
// UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
// SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
// PROVIDED HEREUNDER IS ON AN &quot;AS IS&quot; BASIS, AND THE UNIVERSITY OF
// CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,
// UPDATES, ENHANCEMENTS, OR MODIFICATIONS.

package org.argouml.uml.diagram.ui;

import java.awt.Dimension;
import java.awt.Image;
import java.awt.Rectangle;
import java.beans.PropertyChangeEvent;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.argouml.kernel.Project;
import org.argouml.model.AddAssociationEvent;
import org.argouml.model.Model;
import org.argouml.model.RemoveAssociationEvent;
import org.argouml.uml.diagram.DiagramSettings;
import org.tigris.gef.presentation.Fig;
import org.tigris.gef.presentation.FigRect;
import org.tigris.gef.presentation.FigText;

/**
 * A Fig designed to be the child of some FigNode or FigEdge to display the
 * stereotypes of the model element represented by the parent Fig.
 * Currently, multiple stereotypes are shown stacked one on top of the other,
 * each enclosed by guillemets.&lt;p&gt;
 *
 * The minimum width of this fig is the largest minimum width of its child
 * figs. The minimum height of this fig is the total minimum height of its child
 * figs.&lt;p&gt;
 *
 * The owner of this Fig is the UML element that is extended
 * with the stereotypes. We are listening to changes to the model:
 * addition and removal of stereotypes. &lt;p&gt;
 *
 * This fig supports showing one keyword
 * as the first &quot;stereotype&quot; in the list. &lt;p&gt;
 *
 * There is no way to remove a keyword fig, once added. &lt;p&gt;
 *
 * TODO: Allow for UML2 style display where all stereotypes are displayed in
 * the same guillemet pair and are delimited by commas. The style should be
 * changeable by calling getOrientation(Orientation). The swidget Orientation
 * class can be used for this.
 * @author Bob Tarling
 */
public class FigStereotypesGroup extends ArgoFigGroup {

    private Fig bigPort;

    /**
     * Logger.
     */
<span class="fc" id="L92">    private static final Logger LOG =</span>
<span class="fc" id="L93">        Logger.getLogger(FigStereotypesGroup.class.getName());</span>

    /**
     * One UML keyword is allowed. These are not strictly stereotypes but are
     * displayed as such. e.g. &amp;lt;&amp;lt;interface&amp;gt;&amp;gt;
     */
    private String keyword;

<span class="fc" id="L101">    private int stereotypeCount = 0;</span>

<span class="fc" id="L103">    private boolean hidingStereotypesWithIcon = false;</span>

    private void constructFigs(int x, int y, int w, int h) {
<span class="fc" id="L106">        bigPort = new FigRect(x, y, w, h, LINE_COLOR, FILL_COLOR);</span>
<span class="fc" id="L107">        addFig(bigPort);</span>
<span class="fc" id="L108">        bigPort.setFilled(false);</span>

        /* Do not show border line, make transparent: */
<span class="fc" id="L111">        setLineWidth(0);</span>
<span class="fc" id="L112">        setFilled(false);</span>
<span class="fc" id="L113">    }</span>

    /**
     * The constructor.
     *
     * @param owner owning UML element
     * @param bounds position and size
     * @param settings render settings
     */
    public FigStereotypesGroup(Object owner, Rectangle bounds,
            DiagramSettings settings) {
<span class="fc" id="L124">        super(owner, settings);</span>
<span class="fc" id="L125">        constructFigs(bounds.x, bounds.y, bounds.width, bounds.height);</span>
<span class="fc" id="L126">        Model.getPump().addModelEventListener(this, owner, &quot;stereotype&quot;);</span>
<span class="fc" id="L127">        populate();</span>
<span class="fc" id="L128">    }</span>


    /*
     * @see org.tigris.gef.presentation.Fig#removeFromDiagram()
     */
    @Override
    public void removeFromDiagram() {
        /* Remove all items in the group,
         * otherwise the model event listeners remain:
         * TODO: Why does a FigGroup not do this? */
<span class="fc bfc" id="L139" title="All 2 branches covered.">        for (Object f : getFigs()) {</span>
<span class="fc" id="L140">            ((Fig) f).removeFromDiagram();</span>
<span class="fc" id="L141">        }</span>
<span class="fc" id="L142">        super.removeFromDiagram();</span>
<span class="fc" id="L143">        Model.getPump()</span>
<span class="fc" id="L144">                .removeModelEventListener(this, getOwner(), &quot;stereotype&quot;);</span>
<span class="fc" id="L145">    }</span>

    /**
     * @return the bigport
     * @deprecated for 0.27.2. For backward compatibility only. The visibility
     *             of this method will be changed to private in the next release
     *             when FigStereotypesCompartment is removed.
     */
    @Deprecated
    protected Fig getBigPort() {
<span class="nc" id="L155">        return bigPort;</span>
    }

    @Override
    public void propertyChange(PropertyChangeEvent event) {
<span class="pc bpc" id="L160" title="1 of 2 branches missed.">        if (event instanceof AddAssociationEvent) {</span>
<span class="nc" id="L161">            AddAssociationEvent aae = (AddAssociationEvent) event;</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">            if (event.getPropertyName().equals(&quot;stereotype&quot;)) {</span>
<span class="nc" id="L163">                Object stereotype = aae.getChangedValue();</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">                if (findFig(stereotype) == null) {</span>
<span class="nc" id="L165">                    FigText stereotypeTextFig =</span>
                        new FigStereotype(stereotype,
<span class="nc" id="L167">                                getBoundsForNextStereotype(),</span>
<span class="nc" id="L168">                                getSettings());</span>
<span class="nc" id="L169">                    stereotypeCount++;</span>
<span class="nc" id="L170">                    addFig(stereotypeTextFig);</span>
<span class="nc" id="L171">                    reorderStereotypeFigs();</span>
<span class="nc" id="L172">                    damage();</span>
                }
<span class="nc" id="L174">            } else {</span>
<span class="nc" id="L175">                LOG.log(Level.WARNING, &quot;Unexpected property &quot; + event.getPropertyName());</span>
            }
        }
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">        if (event instanceof RemoveAssociationEvent) {</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">            if (event.getPropertyName().equals(&quot;stereotype&quot;)) {</span>
<span class="nc" id="L180">                RemoveAssociationEvent rae = (RemoveAssociationEvent) event;</span>
<span class="nc" id="L181">                Object stereotype = rae.getChangedValue();</span>
<span class="nc" id="L182">                Fig f = findFig(stereotype);</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">                if (f != null) {</span>
<span class="nc" id="L184">                    removeFig(f);</span>
<span class="nc" id="L185">                    f.removeFromDiagram(); // or vice versa?</span>
<span class="nc" id="L186">                    --stereotypeCount;</span>
                }
<span class="nc" id="L188">            } else {</span>
<span class="nc" id="L189">                LOG.log(Level.WARNING, &quot;Unexpected property &quot; + event.getPropertyName());</span>
            }
        }
<span class="fc" id="L192">    }</span>

    /**
     * Keep the Figs which are likely invisible at the end of the list.
     */
    private void reorderStereotypeFigs() {
<span class="fc" id="L198">	List&lt;Fig&gt; allFigs = getFigs();</span>
<span class="fc" id="L199">	List&lt;Fig&gt; figsWithIcon = new ArrayList&lt;Fig&gt;();</span>
<span class="fc" id="L200">	List&lt;Fig&gt; figsWithOutIcon = new ArrayList&lt;Fig&gt;();</span>
<span class="fc" id="L201">	List&lt;Fig&gt; others = new ArrayList&lt;Fig&gt;();</span>

	// TODO: This doesn't do anything special with keywords.
	// They should probably go first.
<span class="fc bfc" id="L205" title="All 2 branches covered.">	for (Fig f : allFigs) {</span>
<span class="fc bfc" id="L206" title="All 2 branches covered.">            if (f instanceof FigStereotype) {</span>
<span class="fc" id="L207">                FigStereotype s = (FigStereotype) f;</span>
<span class="pc bpc" id="L208" title="1 of 2 branches missed.">                if (getIconForStereotype(s) != null) {</span>
<span class="nc" id="L209">                    figsWithIcon.add(s);</span>
                } else {
<span class="fc" id="L211">                    figsWithOutIcon.add(s);</span>
                }
<span class="fc" id="L213">            } else {</span>
<span class="fc" id="L214">                others.add(f);</span>
            }
<span class="fc" id="L216">        }</span>

<span class="fc" id="L218">	List&lt;Fig&gt; n = new ArrayList&lt;Fig&gt;();</span>

<span class="fc" id="L220">	n.addAll(others);</span>
<span class="fc" id="L221">	n.addAll(figsWithOutIcon);</span>
<span class="fc" id="L222">	n.addAll(figsWithIcon);</span>

<span class="fc" id="L224">	setFigs(n);</span>
<span class="fc" id="L225">    }</span>

    private FigStereotype findFig(Object stereotype) {
<span class="fc bfc" id="L228" title="All 2 branches covered.">        for (Object f : getFigs()) {</span>
<span class="fc bfc" id="L229" title="All 2 branches covered.">            if (f instanceof FigStereotype) {</span>
<span class="fc" id="L230">                FigStereotype fs = (FigStereotype) f;</span>
<span class="pc bpc" id="L231" title="1 of 2 branches missed.">                if (fs.getOwner() == stereotype) {</span>
<span class="fc" id="L232">                    return fs;</span>
                }
            }
<span class="fc" id="L235">        }</span>
<span class="fc" id="L236">        return null;</span>
    }

    /**
     * Get all the child figs that represent the individual stereotypes
     * @return a List of the stereotype Figs
     */
    List&lt;FigStereotype&gt; getStereotypeFigs() {
<span class="fc" id="L244">        final List&lt;FigStereotype&gt; stereotypeFigs =</span>
            new ArrayList&lt;FigStereotype&gt;();
<span class="fc bfc" id="L246" title="All 2 branches covered.">        for (Object f : getFigs()) {</span>
<span class="fc bfc" id="L247" title="All 2 branches covered.">            if (f instanceof FigStereotype) {</span>
<span class="fc" id="L248">                FigStereotype fs = (FigStereotype) f;</span>
<span class="fc" id="L249">                stereotypeFigs.add(fs);</span>
            }
<span class="fc" id="L251">        }</span>
<span class="fc" id="L252">        return stereotypeFigs;</span>
    }

    private FigKeyword findFigKeyword() {
<span class="fc bfc" id="L256" title="All 2 branches covered.">        for (Object f : getFigs()) {</span>
<span class="fc bfc" id="L257" title="All 2 branches covered.">            if (f instanceof FigKeyword) {</span>
<span class="fc" id="L258">                return (FigKeyword) f;</span>
            }
<span class="fc" id="L260">        }</span>
<span class="fc" id="L261">        return null;</span>
    }

    /**
     * TODO: This should become private and only called from constructor
     *
     * @see org.argouml.uml.diagram.ui.FigCompartment#populate()
     */
    public void populate() {

<span class="fc" id="L271">        stereotypeCount = 0;</span>
<span class="fc" id="L272">        Object modelElement = getOwner();</span>
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">        if (modelElement == null) {</span>
            // TODO: This block can be removed after issue 4075 is tackled
<span class="nc" id="L275">            LOG.log(Level.FINE, &quot;Cannot populate the stereotype compartment &quot;</span>
                     + &quot;unless the parent has an owner.&quot;);
<span class="nc" id="L277">            return;</span>
        }

<span class="pc bpc" id="L280" title="1 of 2 branches missed.">        if (LOG.isLoggable(Level.FINE)) {</span>
<span class="nc" id="L281">            LOG.log(Level.FINE, &quot;Populating stereotypes compartment for {0}&quot;,</span>
<span class="nc" id="L282">                    Model.getFacade().getName(modelElement));</span>
        }

        /* This will contain the Figs that we do not need anymore: */
<span class="fc" id="L286">        Collection&lt;Fig&gt; removeCollection = new ArrayList&lt;Fig&gt;(getFigs());</span>

        //There is one fig more in the group than (stereotypes + keyword):
<span class="fc bfc" id="L289" title="All 2 branches covered.">        if (keyword != null) {</span>
<span class="fc" id="L290">            FigKeyword keywordFig = findFigKeyword();</span>
<span class="fc bfc" id="L291" title="All 2 branches covered.">            if (keywordFig == null) {</span>
                // The keyword fig does not exist yet.
                // Let's create one:
<span class="fc" id="L294">                keywordFig =</span>
                    new FigKeyword(keyword,
<span class="fc" id="L296">                            getBoundsForNextStereotype(),</span>
<span class="fc" id="L297">                            getSettings());</span>
                // bounds not relevant here
<span class="fc" id="L299">                addFig(keywordFig);</span>
            } else {
                // The keyword fig already exists.
<span class="fc" id="L302">                removeCollection.remove(keywordFig);</span>
            }
<span class="fc" id="L304">            ++stereotypeCount;</span>
        }

<span class="fc bfc" id="L307" title="All 2 branches covered.">        for (Object stereo : Model.getFacade().getStereotypes(modelElement)) {</span>
<span class="fc" id="L308">            FigStereotype stereotypeTextFig = findFig(stereo);</span>
<span class="fc bfc" id="L309" title="All 2 branches covered.">            if (stereotypeTextFig == null) {</span>
<span class="fc" id="L310">                stereotypeTextFig =</span>
                    new FigStereotype(stereo,
<span class="fc" id="L312">                            getBoundsForNextStereotype(),</span>
<span class="fc" id="L313">                            getSettings());</span>
                // bounds not relevant here
<span class="fc" id="L315">                addFig(stereotypeTextFig);</span>
            } else {
             // The stereotype fig already exists.
<span class="fc" id="L318">                removeCollection.remove(stereotypeTextFig);</span>
            }
<span class="fc" id="L320">            ++stereotypeCount;</span>
<span class="fc" id="L321">        }</span>

        //cleanup of unused FigText's
<span class="fc bfc" id="L324" title="All 2 branches covered.">        for (Fig f : removeCollection) {</span>
<span class="pc bpc" id="L325" title="2 of 4 branches missed.">            if (f instanceof FigStereotype || f instanceof FigKeyword) {</span>
<span class="nc" id="L326">                removeFig(f);</span>
            }
<span class="fc" id="L328">        }</span>

<span class="fc" id="L330">        reorderStereotypeFigs();</span>

        // remove all stereotypes that have a graphical icon
<span class="fc" id="L333">        updateHiddenStereotypes();</span>

<span class="fc" id="L335">    }</span>

    /**
     * Get the number of stereotypes contained in this group
     * @return the number of stereotypes in this group
     */
    public int getStereotypeCount() {
<span class="fc" id="L342">        return stereotypeCount;</span>
    }

    private Rectangle getBoundsForNextStereotype() {
<span class="fc" id="L346">        return new Rectangle(</span>
<span class="fc" id="L347">                bigPort.getX() + 1,</span>
<span class="fc" id="L348">                bigPort.getY() + 1</span>
                + (stereotypeCount
                * ROWHEIGHT),
                0,
                ROWHEIGHT - 2);
    }

    private void updateHiddenStereotypes() {
<span class="fc" id="L356">        List&lt;Fig&gt; figs = getFigs();</span>
<span class="fc bfc" id="L357" title="All 2 branches covered.">        for (Fig f : figs) {</span>
<span class="fc bfc" id="L358" title="All 2 branches covered.">            if (f instanceof FigStereotype) {</span>
<span class="fc" id="L359">                FigStereotype fs = (FigStereotype) f;</span>
<span class="pc bpc" id="L360" title="1 of 2 branches missed.">                fs.setVisible(getIconForStereotype(fs) == null</span>
<span class="pc bnc" id="L361" title="All 2 branches missed.">                        || !isHidingStereotypesWithIcon());</span>
            }
<span class="fc" id="L363">        }</span>
<span class="fc" id="L364">    }</span>

    private Image getIconForStereotype(FigStereotype fs) {
        // TODO: Find a way to replace this dependency on Project
<span class="fc" id="L368">        Project project = getProject();</span>
<span class="fc bfc" id="L369" title="All 2 branches covered.">        if (project == null) {</span>
<span class="fc" id="L370">            LOG.log(Level.WARNING, &quot;getProject() returned null&quot;);</span>
<span class="fc" id="L371">            return null;</span>
        }
<span class="fc" id="L373">        Object owner = fs.getOwner();</span>
<span class="pc bpc" id="L374" title="1 of 2 branches missed.">        if (owner == null) {</span>
            // keywords which look like a stereotype (e.g. &lt;&lt;interface&gt;&gt;) have
            // no owner
<span class="nc" id="L377">            return null;</span>
        } else {
<span class="fc" id="L379">            return project.getProfileConfiguration().getFigNodeStrategy()</span>
<span class="fc" id="L380">                    .getIconForStereotype(owner);</span>
        }
    }

    /*
     * @see org.tigris.gef.presentation.Fig#setBoundsImpl(int, int, int, int)
     */
    @Override
    protected void setBoundsImpl(int x, int y, int w, int h) {
<span class="fc" id="L389">        Rectangle oldBounds = getBounds();</span>

<span class="fc" id="L391">        Dimension minimumSize = getMinimumSize();</span>
<span class="fc" id="L392">        int newW = Math.max(w, minimumSize.width);</span>
<span class="fc" id="L393">        int newH = Math.max(h, minimumSize.height);</span>

<span class="fc" id="L395">        int yy = y;</span>
<span class="fc bfc" id="L396" title="All 2 branches covered.">        for  (Fig fig : (Collection&lt;Fig&gt;) getFigs()) {</span>
<span class="fc bfc" id="L397" title="All 2 branches covered.">            if (fig != bigPort) {</span>
<span class="fc" id="L398">                fig.setBounds(x, yy, newW,</span>
<span class="fc" id="L399">                              fig.getMinimumSize().height);</span>
<span class="fc" id="L400">                yy += fig.getMinimumSize().height;</span>
            }
<span class="fc" id="L402">        }</span>
<span class="fc" id="L403">        bigPort.setBounds(x, y, newW, newH);</span>
<span class="fc" id="L404">        calcBounds();</span>
<span class="fc" id="L405">        firePropChange(&quot;bounds&quot;, oldBounds, getBounds());</span>
<span class="fc" id="L406">    }</span>

    /**
     * Allows a parent Fig to specify some keyword text to display amongst the
     * stereotypes.
     * An example of this usage is to display &amp;lt;&amp;lt;interface&amp;gt;&amp;gt;
     * on FigInterface.
     * @param word the text of the pseudo stereotype
     */
    public void setKeyword(String word) {
<span class="fc" id="L416">        keyword = word;</span>
<span class="fc" id="L417">        populate();</span>
<span class="fc" id="L418">    }</span>

    /**
     * @return true if textual stereotypes are being hidden in preference to
     *         displaying icon.
     */
    public boolean isHidingStereotypesWithIcon() {
<span class="nc" id="L425">        return hidingStereotypesWithIcon;</span>
    }

    /**
     * Turn on/off textual stereotype display in preference to icon.
     *
     * @param hideStereotypesWithIcon true to hide textual stereotypes and
     *                show icon instead.
     */
    public void setHidingStereotypesWithIcon(boolean hideStereotypesWithIcon) {
<span class="fc" id="L435">        this.hidingStereotypesWithIcon = hideStereotypesWithIcon;</span>
<span class="fc" id="L436">        updateHiddenStereotypes();</span>
<span class="fc" id="L437">    }</span>

    @Override
    public Dimension getMinimumSize() {
        // if there are no stereotypes, we return (0,0), preventing
        // double lines in the class (see issue 4939)
<span class="fc" id="L443">        Dimension dim = null;</span>
<span class="fc" id="L444">        Object modelElement = getOwner();</span>

<span class="pc bpc" id="L446" title="1 of 2 branches missed.">        if (modelElement != null) {</span>
<span class="fc" id="L447">            List&lt;FigStereotype&gt; stereos = getStereotypeFigs();</span>
<span class="fc bfc" id="L448" title="All 4 branches covered.">            if (stereos.size() &gt; 0 || keyword != null) {</span>
<span class="fc" id="L449">                int minWidth = 0;</span>
<span class="fc" id="L450">                int minHeight = 0;</span>
                //set new bounds for all included figs
<span class="fc bfc" id="L452" title="All 2 branches covered.">                for (Fig fig : (Collection&lt;Fig&gt;) getFigs()) {</span>
<span class="pc bpc" id="L453" title="1 of 4 branches missed.">                    if (fig.isVisible() &amp;&amp; fig != bigPort) {</span>
<span class="fc" id="L454">                        int fw = fig.getMinimumSize().width;</span>
<span class="pc bpc" id="L455" title="1 of 2 branches missed.">                        if (fw &gt; minWidth) {</span>
<span class="fc" id="L456">                            minWidth = fw;</span>
                        }
<span class="fc" id="L458">                        minHeight += fig.getMinimumSize().height;</span>
                    }
<span class="fc" id="L460">                }</span>

<span class="fc" id="L462">                minHeight += 2; // 2 Pixel padding after compartment</span>
<span class="fc" id="L463">                dim = new Dimension(minWidth, minHeight);</span>
            }
        }
<span class="fc bfc" id="L466" title="All 2 branches covered.">        if (dim == null) {</span>
<span class="fc" id="L467">            dim = new Dimension(0, 0);</span>
        }
<span class="fc" id="L469">        return dim;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>